<h1 
  class="p-4 text-5xl md:text-[64px] font-semibold dark:text-neutral-100" 
  aria-live="polite"
>
  {{ mode === 'edit' ? 'Actualizar Sonido' : 'Crear Sonido' }}
</h1>

<form 
  (ngSubmit)="guardarSonido()" 
  #soundForm="ngForm" 
  class="p-4"
  aria-label="Formulario para crear o actualizar un sonido"
>

  <!-- Nombre -->
  <div class="mb-4">
    <label for="name" class="block text-gray-700 font-medium mb-1 dark:text-neutral-100">
      Nombre del sonido<span class="text-red-600"> *</span>
    </label>
    <input 
      type="text" 
      id="name" 
      [(ngModel)]="sound.name" 
      name="name" 
      required
      aria-label="Nombre del sonido"
      class="border border-stone-200 px-2 py-1 w-[250px] rounded-xs dark:text-gray-300 dark:border-neutral-800"
      placeholder="Introduce el nombre del sonido"
    />
  </div>

  <!-- Duración -->
  <div class="mb-4">
    <label for="duration" class="block text-gray-700 font-medium mb-1 dark:text-neutral-100">
      Duración (mm:ss)
    </label>
    <input 
      type="text" 
      id="duration" 
      [(ngModel)]="sound.duration" 
      name="duration" 
      readonly
      aria-label="Duración del sonido en minutos y segundos"
      class="border border-stone-200 px-2 py-1 w-[250px] rounded-xs dark:text-gray-300 dark:border-neutral-800"
      placeholder="0:00"
    />
  </div>

  <!-- Habilitado -->
  <div class="mb-6">
    <label for="enabled" class="block text-gray-700 font-medium mb-2 dark:text-neutral-100">
      ¿Habilitado?
    </label>
    <label class="relative inline-flex items-center cursor-pointer">
      <input 
        type="checkbox" 
        id="enabled" 
        name="enabled" 
        [(ngModel)]="sound.enabled" 
        class="sr-only peer"
        [attr.aria-label]="'Sonido habilitado: ' + (sound.enabled ? 'Sí' : 'No')"
      />
      <div class="w-11 h-6 bg-gray-300 rounded-full peer-checked:bg-emerald-500 transition-colors duration-300"></div>
      <div class="absolute left-0.5 top-0.5 w-5 h-5 bg-white border border-gray-300 rounded-full transition-transform duration-300 transform peer-checked:translate-x-5"></div>
      <span class="ml-3 text-sm text-gray-700 font-medium dark:text-neutral-100">
        {{ sound.enabled ? 'Sí' : 'No' }}
      </span>
    </label>
  </div>

  <!-- Categoría -->
  <div class="mb-4">
    <label for="categoryId" class="block text-gray-700 font-medium mb-1 dark:text-neutral-100">
      Categoría<span class="text-red-600"> *</span>
    </label>
    <select 
      id="categoryId" 
      [(ngModel)]="sound.categoryId" 
      name="categoryId" 
      required
      aria-label="Seleccionar categoría del sonido"
      class="border border-stone-200 px-2 py-1 w-[250px] rounded-xs dark:text-gray-300 dark:border-neutral-800"
    >
      <option 
        *ngFor="let category of categories" 
        [value]="category.id" 
        class="dark:text-stone-950"
      >
        {{ category.name }}
      </option>
    </select>
  </div>

  <!-- Audio -->
  <div class="mb-6">
    <label for="audioUrl" class="block text-gray-700 font-medium mb-2 dark:text-neutral-100">
      Archivo de audio (MP3)
    </label>

    <div class="relative group">
      <input 
        type="file" 
        id="audioUrl" 
        (change)="onAudioSelected($event)" 
        accept=".mp3"
        [required]="mode === 'create'"
        [attr.aria-label]="'Archivo de audio en formato MP3' + (selectedAudioFile ? ': ' + selectedAudioFile.name : '')"
        class="absolute inset-0 w-full h-full opacity-0 z-10 cursor-pointer"
      />

      <div class="flex flex-col items-center justify-center gap-2 border-2 border-dashed border-gray-300 rounded-lg p-4 bg-gray-50 text-center dark:bg-zinc-800 dark:hover:bg-zinc-700 dark:border-zinc-600 flex">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="text-zinc-400 w-8 h-8">
          <path d="M9,18V5L21,3V16" fill="none" stroke="currentColor"/>
          <circle cx="6" cy="18" r="3" fill="none" stroke="currentColor"/>
          <circle cx="18" cy="16" r="3" fill="none" stroke="currentColor"/>
        </svg>

        <p class="text-gray-700 font-medium text-sm dark:text-zinc-300">Haz clic o arrastra un archivo MP3</p>
        <p class="text-gray-500 text-xs">Formato recomendado: .mp3, duración corta</p>

        <span *ngIf="selectedAudioFile" class="text-sm text-blue-600 truncate max-w-xs">
          Archivo: {{ selectedAudioFile.name }}
        </span>
      </div>
    </div>
  </div>

  <!-- Icono -->
  <div class="mb-6">
    <label for="icon_url" class="block text-gray-700 font-medium mb-2 dark:text-neutral-100">
      Icono (PNG)
    </label>

    <div class="relative group">
      <input
        type="file"
        id="icon_url"
        (change)="onImageSelected($event)"
        accept=".png"
        [required]="mode === 'create'"
        [attr.aria-label]="'Icono en formato PNG' + (selectedImageFile ? ': ' + selectedImageFile.name : '')"
        class="absolute inset-0 w-full h-full opacity-0 z-10 cursor-pointer"
      />

      <div class="flex flex-col items-center justify-center gap-2 border-2 border-dashed border-gray-300 rounded-lg p-4 bg-gray-50 text-center dark:bg-zinc-800 dark:hover:bg-zinc-700 dark:border-zinc-600 flex">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="text-zinc-400 w-8 h-8">
          <rect x="2.5" y="5" width="19" height="14" fill="none" stroke="currentColor"/>
          <polyline points="17.5 19 7.5 9 2.5 14" fill="none" stroke="currentColor"/>
          <polyline points="21.5 17 16.5 12 13.5 15" fill="none" stroke="currentColor"/>
        </svg>

        <p class="text-gray-700 font-medium text-sm dark:text-zinc-300">Haz clic o arrastra un archivo PNG</p>
        <p class="text-gray-500 text-xs">Tamaño recomendado: 100x100 px</p>

        <span *ngIf="selectedImageFile" class="text-sm text-blue-600 truncate max-w-xs">
          Archivo: {{ selectedImageFile.name }}
        </span>
      </div>
    </div>
  </div>

  <!-- Botón -->
  <div class="mt-6">
    <button
      type="submit"
      [attr.aria-label]="mode === 'edit' ? 'Actualizar sonido' : 'Guardar sonido'"
      class="mx-auto w-full border-3 border-emerald-500 text-emerald-500 py-2 rounded hover:bg-emerald-500 hover:text-white transition-colors"
    >
      {{ mode === 'edit' ? 'Actualizar Sonido' : 'Guardar Sonido' }}
    </button>
  </div>
</form>
